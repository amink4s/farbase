#!/usr/bin/env bash
# Repo-local pre-push hook: run a production build and abort push on failure.
# This enforces a quick sanity check before pushing to remote (helps prevent Vercel build failures).

set -euo pipefail

echo "[pre-push] Running 'npm run build' to validate the project before pushing..."

# Run build; allow it to print errors. Use --if-present to avoid failing if script missing.
if ! npm run build --if-present; then
  echo "[pre-push] npm run build failed. Aborting push." >&2
  exit 1
fi

echo "[pre-push] Build succeeded. Proceeding with push."
exit 0
